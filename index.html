<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Son of a snake</title>

    <style>
        body {
            background: khaki;
            text-align: center;
        }

        canvas {
            border: 10px solid sienna;
        }
    </style>
</head>
<body>
<canvas width="600" height="600"></canvas>

<script>
    // listeners
    document.addEventListener('keydown', keyPush)

    // canvas
    const canvas = document.querySelector('canvas')
    const ctx = canvas.getContext('2d')

    // player
    const snakeSize = 50;

    let snakeSpeed = 5;
    let snakePosX = 0;
    let snakePosY = canvas.height / 2 - snakeSize / 2;

    let velocityX = 0;
    let velocityY = 0;

    // loop
    function gameLoop() {
        drawStuff()
        moveStuff()
        setTimeout(gameLoop, 1000 / 15)
    }

    gameLoop()

    // move everything
    function moveStuff() {

        snakePosX += snakeSpeed * velocityX;
        snakePosY += snakeSpeed * velocityY;

        if (snakePosX > canvas.width) {
            snakePosX = 0;
        }
        if (snakePosX < -snakeSize) {
            snakePosX = canvas.width;
        }
        if (snakePosY > canvas.height) {
            snakePosY = 0;
        }
        if (snakePosY < -snakeSize) {
            snakePosY = canvas.height;
        }
    }

    // draw everything
    function drawStuff() {
        rectangle('white', 0, 0, canvas.width, canvas.height)
        rectangle('black', snakePosX, snakePosY, snakeSize, snakeSize)
    }

    function rectangle(color, x, y, width, height) {
        ctx.fillStyle = color
        ctx.fillRect(x, y, width, height)
    }

    // keyboard
    function keyPush(event) {
        switch (event.key) {
            case 'ArrowLeft':
                if (velocityX !== 1) {
                    velocityX = -1;
                    velocityY = 0;
                }
                break;
            case 'ArrowUp':
                if (velocityY !== 1) {
                    velocityX = 0;
                    velocityY = -1;
                }
                break;
            case 'ArrowRight':
                if (velocityX !== -1) {
                    velocityX = 1;
                    velocityY = 0;
                }
                break;
            case 'ArrowDown':
                if (velocityY !== -1) {
                    velocityX = 0;
                    velocityY = 1;
                }
                break;

        }
    }
</script>
</body>
</html>